!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).SmoothDnD={})}(this,function(e){"use strict";var i,r="smooth-dnd-container-instance",v="smooth-dnd-draggable-wrapper",o="animated",c="__smooth_dnd_draggable_translation_value",a="__smooth_dnd_draggable_visibility_value",p="smooth-dnd-ghost",y="smooth-dnd-container",u="smooth-dnd-extra-size-for-insertion",d="smooth-dnd-stretcher-element",f="smooth-dnd-stretcher-instance",l="smooth-dnd-disable-touch-action",s="smooth-dnd-no-user-select",g="smooth-dnd-prevent-auto-scroll-class",m="smooth-dnd-drop-preview-default-class",h="smooth-dnd-drop-preview-inner-class",b="smooth-dnd-drop-preview-constant-class",w="smooth-dnd-drop-preview-flex-container-class",t=Object.freeze({containerInstance:r,defaultGroupName:"@@smooth-dnd-default-group@@",wrapperClass:v,defaultGrabHandleClass:"smooth-dnd-default-grap-handle",animationClass:o,translationValue:c,visibilityValue:a,ghostClass:p,containerClass:y,extraSizeForInsertion:u,stretcherElementClass:d,stretcherElementInstance:f,isDraggableDetached:"smoth-dnd-is-draggable-detached",disbaleTouchActions:l,noUserSelectClass:s,preventAutoScrollClass:g,dropPlaceholderDefaultClass:m,dropPlaceholderInnerClass:h,dropPlaceholderWrapperClass:b,dropPlaceholderFlexContainerClass:w}),x={groupName:void 0,behaviour:"move",orientation:"vertical",getChildPayload:void 0,animationDuration:250,autoScrollEnabled:!0,shouldAcceptDrop:void 0,shouldAnimateDrop:void 0};function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}(zt=i=i||{}).x="x",zt.y="y",zt.xy="xy";function S(e,t,n){return"x"===n?{left:Math.max(e.left,t.left),top:e.top,right:Math.min(e.right,t.right),bottom:e.bottom}:{left:e.left,top:Math.max(e.top,t.top),right:e.right,bottom:Math.min(e.bottom,t.bottom)}}function O(e,t){var n=window.getComputedStyle(e),e=n.overflow,t=n["overflow-".concat(t)];return"auto"===e||"scroll"===e||("auto"===t||"scroll"===t)}function R(t,n){var o=[];function e(){o&&(o.forEach(function(e){return e.removeEventListener("scroll",n)}),window.removeEventListener("scroll",n))}return function(){for(var e=t;e;)(O(e,"x")||O(e,"y"))&&o.push(e),e=e.parentElement}(),{dispose:function(){e(),o=null},start:function(){o&&(o.forEach(function(e){return e.addEventListener("scroll",n)}),window.addEventListener("scroll",n))},stop:e}}var A=function(e,t){return{left:Math.max(e.left,t.left),top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom)}},I=function(e){var t,n=e.getBoundingClientRect(),n={left:n.left,right:n.right,top:n.top,bottom:n.bottom};return P(e,"x")&&!B(e,"x")&&(t=n.right-n.left,n.right=n.right+e.scrollWidth-t),P(e,"y")&&!B(e,"y")&&(t=n.bottom-n.top,n.bottom=n.bottom+e.scrollHeight-t),n},B=function(e,t){var n=window.getComputedStyle(e),e=n.overflow,t=n["overflow-".concat(t)];return"auto"===e||"scroll"===e||"hidden"===e||("auto"===t||"scroll"===t||"hidden"===t)},P=function(e,t){return"x"===t?e.scrollWidth>e.clientWidth:e.scrollHeight>e.clientHeight},T=function(e,t){for(var n=e,o=t||I(e),n=e.parentElement;n;)P(n,"x")&&B(n,"x")&&(o=S(o,n.getBoundingClientRect(),"x")),P(n,"y")&&B(n,"y")&&(o=S(o,n.getBoundingClientRect(),"y")),n=n.parentElement;return o},z=function(e,n){for(var o=e;o;){if(o[r]){var t=function(){var t=o[r];if(n.some(function(e){return e===t}))return{v:t}}();if("object"===E(t))return t.v}o=o.parentElement}return null},N=function(e,t){for(var n=e;n;){if(n.matches(t))return n;n=n.parentElement}return null},M=function(e,t){return-1<e.className.split(" ").map(function(e){return e}).indexOf(t)},L=function(e,t){var n;!e||-1===(n=e.className.split(" ").filter(function(e){return e})).indexOf(t)&&(n.unshift(t),e.className=n.join(" "))},j=function(e,t){var n;e&&(n=e.className.split(" ").filter(function(e){return e&&e!==t}),e.className=n.join(" "))},F=function(e,t){return e.removeChild(e.children[t])},_=function(e,t,n){n>=e.children.length?e.appendChild(t):e.insertBefore(t,e.children[n])},V=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():window.document.selection&&window.document.selection.empty()},X=function(e){if(e){e=window.getComputedStyle(e);if(e)return e.cursor}return null};function H(e){return!(e.bottom<=e.top||e.right<=e.left)}function G(e){var a=e.element,l=e.draggables;return function(e,t){var n=e.removedIndex,o=e.addedIndex,r=e.droppedElement,i=null;null!==n&&(i=F(a,n),l.splice(n,1)),null!==o&&((n=window.document.createElement("div")).className="".concat(v),n.appendChild(i&&i.firstElementChild?i.firstElementChild:r),_(a,n,o),o>=l.length?l.push(n):l.splice(o,0,n)),t&&t(e)}}var Y=Object.freeze({domDropHandler:G,reactDropHandler:function(){return{handler:function(){return function(e,t){t&&t(e)}}}}}),k={size:"offsetWidth",distanceToParent:"offsetLeft",translate:"transform",begin:"left",end:"right",dragPosition:"x",scrollSize:"scrollWidth",offsetSize:"offsetWidth",scrollValue:"scrollLeft",scale:"scaleX",setSize:"width",setters:{translate:function(e){return"translate3d(".concat(e,"px, 0, 0)")}}},W={size:"offsetHeight",distanceToParent:"offsetTop",translate:"transform",begin:"top",end:"bottom",dragPosition:"y",scrollSize:"scrollHeight",offsetSize:"offsetHeight",scrollValue:"scrollTop",scale:"scaleY",setSize:"height",setters:{translate:function(e){return"translate3d(0,".concat(e,"px, 0)")}}};function q(o){return{get:function(e,t){return e[o[t]||t]},set:function(e,t,n){e[o[t]]=o.setters[t]?o.setters[t](n):n}}}function U(n,l){n[u]=0;var o=q("horizontal"===l?k:W),s={translation:0};function e(){var e,t;r(n),t=(e=n).getBoundingClientRect(),s.scaleX=e.offsetWidth?(t.right-t.left)/e.offsetWidth:1,s.scaleY=e.offsetHeight?(t.bottom-t.top)/e.offsetHeight:1}function r(e){s.rect=I(e);e=T(e,s.rect);H(e)&&(s.lastVisibleRect=s.visibleRect),s.visibleRect=e}function i(e){if(e.tagName){var t=e.getBoundingClientRect();return"vertical"===l?t.bottom-t.top:t.right-t.left}return o.get(e,"size")*o.get(s,"scale")}function t(e){return o.get(e,"dragPosition")}return window.addEventListener("resize",function(){r(n)}),setTimeout(function(){e()},10),{getSize:i,getContainerRectangles:function(){return{rect:s.rect,visibleRect:s.visibleRect,lastVisibleRect:s.lastVisibleRect}},getBeginEndOfDOMRect:function(e){return{begin:o.get(e,"begin"),end:o.get(e,"end")}},getBeginEndOfContainer:function(){return{begin:o.get(s.rect,"begin")+s.translation,end:o.get(s.rect,"end")+s.translation}},getBeginEndOfContainerVisibleRect:function(){return{begin:o.get(s.visibleRect,"begin")+s.translation,end:o.get(s.visibleRect,"end")+s.translation}},getBeginEnd:function(e){var t=(t=e,(o.get(t,"distanceToParent")+(t[c]||0))*o.get(s,"scale")+(o.get(s.rect,"begin")+s.translation)-o.get(n,"scrollValue"));return{begin:t,end:t+i(e)*o.get(s,"scale")}},getAxisValue:t,setTranslation:function(e,t){t?o.set(e.style,"translate",t):e.style.removeProperty("transform"),e[c]=t},getTranslation:function(e){return e[c]},setVisibility:function(e,t){void 0!==e[a]&&e[a]===t||(t?e.style.removeProperty("visibility"):e.style.visibility="hidden",e[a]=t)},isVisible:function(e){return void 0===e[a]||e[a]},isInVisibleRect:function(e,t){var n=s.visibleRect,o=n.left,r=n.top,i=n.right,a=n.bottom;return a-r<2&&(a=r+30),n=s.rect,"vertical"===l?e>n.left&&e<n.right&&r<t&&t<a:o<e&&e<i&&t>n.top&&t<n.bottom},setSize:function(e,t){o.set(e,"setSize",t)},getTopLeftOfElementBegin:function(e){var t=0;return{top:"horizontal"===l?(t=e,s.rect.top):(t=s.rect.left,e),left:t}},getScrollSize:function(e){return o.get(e,"scrollSize")},getScrollValue:function(e){return o.get(e,"scrollValue")},setScrollValue:function(e,t){return o.set(e,"scrollValue",t)},invalidate:e,invalidateRects:function(){r(n)},getPosition:t,setBegin:function(e,t){o.set(e,"begin",t)}}}function $(e,t,n){var o,r,i=n.left,a=n.right,l=n.top,s=n.bottom,n=e.x,e=e.y;if(n<i||a<n||e<l||s<e)return null;s="x"===t?(o=i,r=a,n):(o=l,r=s,e);e=r-o,e=400<e?100:e/4;return r-s<e?{direction:"end",speedFactor:(e-(r-s))/e}:s-o<e?{direction:"begin",speedFactor:(e-(s-o))/e}:null}function J(e,t,n){e&&(e!==window?"x"===t?e.scrollLeft+=n:e.scrollTop+=n:"x"===t?e.scrollBy(n,0):e.scrollBy(0,n))}function K(o){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"y",i=null,a=null,l=null,s=null;return{animate:function(e,t){l=e,s=t,function n(){null===i&&(i=requestAnimationFrame(function(e){null===a&&(a=e);var t=e-a;a=e;var t=t/1e3*s;J(o,r,t="begin"===l?0-t:t),i=null,n()}))}()},stop:function(){null!==i&&(cancelAnimationFrame(i),i=null),a=null}}}function Q(e){for(var t=[],n=e.element;n;){var o=function(e){var t=window.getComputedStyle(e),e=t.overflow;if("auto"===e||"scroll"===e)return i.xy;e=t["overflow-x"],e="auto"===e||"scroll"===e,t=t["overflow-y"],t="auto"===t||"scroll"===t;return e&&t?i.xy:e?i.x:t?i.y:null}(n);if(o&&!M(n,g)){var r={};switch(o){case i.xy:r.x={animator:K(n,"x")},r.y={animator:K(n,"y")};break;case i.x:r.x={animator:K(n,"x")};break;case i.y:r.y={animator:K(n,"y")}}t.push({axisAnimations:r,getRect:function(e){return function(){return T(e,e.getBoundingClientRect())}}(n),scrollerElement:n})}n=n.parentElement}return t}var Z,ee=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1500,i=e.reduce(function(e,t){t=Q(t).filter(function(t){return!e.find(function(e){return e.scrollerElement===t.scrollerElement})});return[].concat(C(e),C(t))},[]);return function(e){var t,o,n=e.draggableInfo;e.reset?i.forEach(function(e){e.axisAnimations.x&&e.axisAnimations.x.animator.stop(),e.axisAnimations.y&&e.axisAnimations.y.animator.stop()}):n&&(e=i,o=n.mousePosition,e.forEach(function(e){var t=e.axisAnimations,n=(0,e.getRect)();t.x&&(t.x.scrollParams=$(o,"x",n),e.cachedRect=n),t.y&&(t.y.scrollParams=$(o,"y",n),e.cachedRect=n)}),i.forEach(function(e){var t,n=e.axisAnimations,o=n.x,e=n.y;o&&(o.scrollParams?(n=(t=o.scrollParams).direction,t=t.speedFactor,o.animator.animate(n,t*r)):o.animator.stop()),e&&(e.scrollParams?(o=(t=e.scrollParams).direction,t=t.speedFactor,e.animator.animate(o,t*r)):e.animator.stop())}),(e=i.filter(function(e){return e.cachedRect})).length&&1<e.length&&((t=function(e,t){for(var n=document.elementFromPoint(t.x,t.y);n;){var o=e.find(function(e){return e.scrollerElement===n});if(o)return o;n=n.parentElement}return null}(e,n.mousePosition))&&e.forEach(function(e){e!==t&&(e.axisAnimations.x&&e.axisAnimations.x.animator.stop(),e.axisAnimations.y&&e.axisAnimations.y.animator.stop())})))}};"undefined"!=typeof window&&((Z=Element)&&Z.prototype&&!Z.prototype.matches&&(Z.prototype.matches=Z.prototype.matchesSelector||Z.prototype.mozMatchesSelector||Z.prototype.msMatchesSelector||Z.prototype.oMatchesSelector||Z.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;0<=--n&&t.item(n)!==this;);return-1<n}),(Z=Node||Element)&&Z.prototype&&null==Z.prototype.firstElementChild&&Object.defineProperty(Z.prototype,"firstElementChild",{get:function(){for(var e,t=this.childNodes,n=0;e=t[n++];)if(1===e.nodeType)return e;return null}}),Array.prototype.some||(Array.prototype.some=function(e){if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;for(var t=Object(this),n=t.length>>>0,o=2<=arguments.length?arguments[1]:void 0,r=0;r<n;r++)if(r in t&&e.call(o,t[r],r,t))return!0;return!1}));var te={overflow:"hidden",display:"block"},ne={height:"100%",display:"table-cell","vertical-align":"top"},oe=(n(zt={},".".concat(y),{position:"relative","min-height":"30px","min-width":"30px"}),n(zt,".".concat(y,".horizontal"),{display:"table"}),n(zt,".".concat(y,".horizontal > .").concat(d),{display:"inline-block"}),n(zt,".".concat(y,".horizontal > .").concat(v),ne),n(zt,".".concat(y,".vertical > .").concat(v),te),n(zt,".".concat(v),{"box-sizing":"border-box"}),n(zt,".".concat(v,".horizontal"),ne),n(zt,".".concat(v,".vertical"),te),n(zt,".".concat(v,".animated"),{transition:"transform ease"}),n(zt,".".concat(p),{"box-sizing":"border-box"}),n(zt,".".concat(p,".animated"),{transition:"all ease-in-out"}),n(zt,".".concat(p," *"),{"pointer-events":"none"}),n(zt,".".concat(l," *"),{"touch-action":"none","-ms-touch-action":"none"}),n(zt,".".concat(s),{"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}),n(zt,".".concat(h),{flex:"1"}),n(zt,".".concat(y,".horizontal > .").concat(b),{height:"100%",overflow:"hidden",display:"table-cell","vertical-align":"top"}),n(zt,".".concat(y,".vertical > .").concat(b),{overflow:"hidden",display:"block",width:"100%"}),n(zt,".".concat(w),{width:"100%",height:"100%",display:"flex","justify-content":"stretch","align-items":"stretch"}),n(zt,".".concat(m),{"background-color":"rgba(150, 150, 150, 0.1)",border:"1px solid #ccc"}),zt);function re(o){return Object.keys(o).reduce(function(e,t){var n=o[t];return"object"===E(n)?"".concat(e).concat(t,"{").concat(re(n),"}"):"".concat(e).concat(t,":").concat(n,";")},"")}function ie(e){if(e&&"undefined"!=typeof window){var t=window.document.head||window.document.getElementsByTagName("head")[0],n=window.document.createElement("style"),e=re({"body *":{cursor:"".concat(e)}});return n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(window.document.createTextNode(e)),t.appendChild(n),n}return null}function ae(e){e&&"undefined"!=typeof window&&(window.document.head||window.document.getElementsByTagName("head")[0]).removeChild(e)}var le=["mousedown","touchstart"],se=["mousemove","touchmove"],ce=["mouseup","touchend"],ue=null,de=null,fe=null,ge=null,me=[],pe=!1,he=!1,ve=!1,ye=!1,be=null,we=null,xe=null,Ee=null,Ce=function(){console.log("watchRectangles");var t=null,e=!1;return{start:function(){e||(e=!0,function e(){t=requestAnimationFrame(function(){ue.forEach(function(e){return e.layout.invalidateRects()}),setTimeout(function(){null!==t&&e()},50)})}())},stop:function(){null!==t&&(cancelAnimationFrame(t),t=null),e=!1}}}(),De="undefined"!=typeof window&&!!(window.navigator.userAgent.match(/Android/i)||window.navigator.userAgent.match(/webOS/i)||window.navigator.userAgent.match(/iPhone/i)||window.navigator.userAgent.match(/iPad/i)||window.navigator.userAgent.match(/iPod/i)||window.navigator.userAgent.match(/BlackBerry/i)||window.navigator.userAgent.match(/Windows Phone/i));function Se(){"undefined"!=typeof window&&le.forEach(function(e){window.document.addEventListener(e,_e,{passive:!1})})}function Oe(){return ge&&ge.ghostParent?ge.ghostParent:de&&de.parentElement||window.document.body}var Re,Ae,Ie,Be,Pe,Te,ze=(Pe=1,Te=5,function(e,t,n){Re=Ue(e),Ie=n,(Ae="number"==typeof t?t:De?200:0)&&(Be=setTimeout(Fe,Ae)),se.forEach(function(e){return window.document.addEventListener(e,Ne)},{passive:!1}),ce.forEach(function(e){return window.document.addEventListener(e,Me)},{passive:!1}),window.document.addEventListener("drag",Le,{passive:!1})});function Ne(e){var t=Ue(e),e=t.clientX,t=t.clientY;if(Ae)(Math.abs(Re.clientX-e)>Te||Math.abs(Re.clientY-t)>Te)&&je();else if(Math.abs(Re.clientX-e)>Pe||Math.abs(Re.clientY-t)>Pe)return Fe()}function Me(){je()}function Le(){je()}function je(){clearTimeout(Be),se.forEach(function(e){return window.document.removeEventListener(e,Ne)},{passive:!1}),ce.forEach(function(e){return window.document.removeEventListener(e,Me)},{passive:!1}),window.document.removeEventListener("drag",Le,{passive:!1})}function Fe(){clearTimeout(Be),je(),Ie()}function _e(e){console.log("onMouseDown");var t,n,o,r,i,a=Ue(e);pe||void 0!==a.button&&0!==a.button||(de=N(a.target,"."+v))&&(t=N(de,"."+y),o=(n=me.filter(function(e){return e.element===t})[0]).getOptions().dragHandleSelector,i=n.getOptions().nonDragAreaSelector,r=!0,o&&!N(a.target,o)&&(r=!1),i&&N(a.target,i)&&(r=!1),r&&(n.layout.invalidate(),L(window.document.body,l),L(window.document.body,s),i=function e(){j(window.document.body,l),j(window.document.body,s),window.document.removeEventListener("mouseup",e)},window.document.addEventListener("mouseup",i)),r&&ze(a,n.getOptions().dragBeginDelay,function(){V(),Ze(a,X(e.target)),se.forEach(function(e){window.document.addEventListener(e,Ve,{passive:!1})}),ce.forEach(function(e){window.document.addEventListener(e,qe,{passive:!1})})}))}function Ve(e){console.log("onMouseMove"),e.preventDefault();var t,n=Ue(e);ge?("contain"===(t=ge.container.getOptions()).behaviour?function(e,t){var n=e.clientX,o=e.clientY,e=1<arguments.length&&void 0!==t?t:"vertical";console.log("handleMouseMoveForContainer");var r,i,t=ge.container.layout.getBeginEndOfContainerVisibleRect(),e="vertical"===e?(r=o,i="y",a="top",ge.size.offsetHeight):(r=n,i="x",a="left",ge.size.offsetWidth),o=t.begin,n=t.end-e,a=Math.max(o,Math.min(n,r+fe.positionDelta[a]));fe.topLeft[i]=a,ge.position[i]=Math.max(t.begin,Math.min(t.end,r+fe.centerDelta[i])),ge.mousePosition[i]=Math.max(t.begin,Math.min(t.end,r)),ge.position[i]<t.begin+e/2&&(ge.position[i]=t.begin+2),ge.position[i]>t.end-e/2&&(ge.position[i]=t.end-2)}(n,t.orientation):xe?"y"===xe?(fe.topLeft.y=n.clientY+fe.positionDelta.top,ge.position.y=n.clientY+fe.centerDelta.y,ge.mousePosition.y=n.clientY):"x"===xe&&(fe.topLeft.x=n.clientX+fe.positionDelta.left,ge.position.x=n.clientX+fe.centerDelta.x,ge.mousePosition.x=n.clientX):(fe.topLeft.x=n.clientX+fe.positionDelta.left,fe.topLeft.y=n.clientY+fe.positionDelta.top,ge.position.x=n.clientX+fe.centerDelta.x,ge.position.y=n.clientY+fe.centerDelta.y,ge.mousePosition.x=n.clientX,ge.mousePosition.y=n.clientY),rt(),(ye=!be(ge))&&ke()):Ze(n,X(e.target))}var Xe,He,Ge,Ye,ke=(Xe=We,Ge=!(He=20),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Ye&&clearTimeout(Ye),Ge&&!Ye?Xe.call.apply(Xe,[null].concat(t)):Ye=setTimeout(function(){Ye=null,Xe.call.apply(Xe,[null].concat(t))},He)});function We(){ye&&(ye=!1,$e(ge,ue))}function qe(){function r(){j(fe.ghost,"animated"),fe.ghost.style.transitionDuration=null,Oe().removeChild(fe.ghost),n()}function e(e,t,n){var o=e.top,e=e.left;L(fe.ghost,"animated"),n&&L(fe.ghost.firstElementChild,n),fe.topLeft.x=e,fe.topLeft.y=o,rt(t),setTimeout(function(){r()},t+20)}function t(e,t){L(fe.ghost,"animated"),rt(e,.9,!0),setTimeout(function(){t()},e+20)}var n,o,i,a,l;se.forEach(function(e){window.document.removeEventListener(e,Ve,{passive:!1})}),ce.forEach(function(e){window.document.removeEventListener(e,qe,{passive:!1})}),we({reset:!0}),Ee&&(ae(Ee),Ee=null),ge&&(Ce.stop(),We(),ve=!0,n=function(){Qe(pe=!1);for(var e=ue||[],t=e.shift();void 0!==t;)t.handleDrop(ge),t=e.shift();be=xe=ge=fe=de=ue=null,ve=!1},console.log("handleDropAnimation"),ge.targetElement?(a=me.filter(function(e){return e.element===ge.targetElement})[0],!(l=a.getOptions()).shouldAnimateDrop||l.shouldAnimateDrop(ge.container.getOptions(),ge.payload)?e(a.getDragResult().shadowBeginEnd.rect,Math.max(150,a.getOptions().animationDuration/2),a.getOptions().dropClass):r()):(o=me.filter(function(e){return e===ge.container})[0])?(l=(i=o.getOptions()).behaviour,a=i.removeOnDropOut,"move"!==l&&"contain"!==l||!he&&a||!o.getDragResult()?t(o.getOptions().animationDuration,r):!H((i=o.layout.getContainerRectangles()).visibleRect)&&H(i.lastVisibleRect)?e({top:i.lastVisibleRect.top,left:i.lastVisibleRect.left},o.getOptions().animationDuration,o.getOptions().dropClass):(a=(l=o.getDragResult()).removedIndex,i=l.elementSize,l=o.layout,o.getTranslateCalculator({dragResult:{removedIndex:a,addedIndex:a,elementSize:i,pos:void 0,shadowBeginEnd:void 0}}),a=0<a?l.getBeginEnd(o.draggables[a-1]).end:l.getBeginEndOfContainer().begin,e(l.getTopLeftOfElementBegin(a),o.getOptions().animationDuration,o.getOptions().dropClass))):t(x.animationDuration,r))}function Ue(e){return e.touches?e.touches[0]:e}function $e(t,e){console.log("handleDragImmediate");var n=!1;e.forEach(function(e){e=e.handleDrag(t);n=!!e.containerBoxChanged||!1,e.containerBoxChanged=!1}),n&&(n=!1,requestAnimationFrame(function(){me.forEach(function(e){e.layout.invalidateRects(),e.onTranslated()})}))}function Je(e){console.log("dragHandler");var t=e,n=null;return function(e){return!(null!==n||!pe||ve)&&(n=requestAnimationFrame(function(){pe&&!ve&&($e(e,t),we({draggableInfo:e})),n=null}),!0)}}function Ke(e,t){return console.log("getScrollHandler"),e.getOptions().autoScrollEnabled?ee(t,e.getScrollMaxSpeed()):function(e){return null}}function Qe(o){console.log("fireOnDragStartEnd"),Ee&&(ae(Ee),Ee=null),me.forEach(function(e){var t,n=o?e.getOptions().onDragStart:e.getOptions().onDragEnd;n&&(t={isSource:e===ge.container,payload:ge.payload},e.isDragRelevant(ge.container,ge.payload)?t.willAcceptDrop=!0:t.willAcceptDrop=!1,n(t))})}function Ze(e,t){var n,o,r,i,a,l,s,c,u,d,f,g,m;console.log("initiateDrag"),null!==de&&(console.log("grabbedElement"),pe=!0,(n=me.filter(function(e){return de.parentElement===e.element})[0]).setDraggables(),xe=n.getOptions().lockAxis?n.getOptions().lockAxis.toLowerCase():null,u=de,d=me.filter(function(e){return u.parentElement===e.element})[0],f=d.draggables.indexOf(u),g=d.getOptions().getGhostParent,m=u.getBoundingClientRect(),ge={container:d,element:u,size:{offsetHeight:m.bottom-m.top,offsetWidth:m.right-m.left},elementIndex:f,payload:d.getOptions().getChildPayload?d.getOptions().getChildPayload(f):void 0,targetElement:null,position:{x:0,y:0},groupName:d.getOptions().groupName,ghostParent:g?g():null,invalidateShadow:null,mousePosition:null,relevantContainers:null},o=de,r={x:e.clientX,y:e.clientY},i=ge.container,a=t,l=r.x,s=r.y,f=(m=o.getBoundingClientRect()).left,d=m.top,g=m.right,t=m.bottom,m=(r=A(i.layout.getContainerRectangles().visibleRect,m)).left+(r.right-r.left)/2,r=r.top+(r.bottom-r.top)/2,(c=o.cloneNode(!0)).style.zIndex="1000",c.style.boxSizing="border-box",c.style.position="fixed",c.style.top="0px",c.style.left="0px",c.style.transform=null,c.style.removeProperty("transform"),i.shouldUseTransformForGhost()?c.style.transform="translate3d(".concat(f,"px, ").concat(d,"px, 0)"):(c.style.top="".concat(d,"px"),c.style.left="".concat(f,"px")),c.style.width=g-f+"px",c.style.height=t-d+"px",c.style.overflow="visible",c.style.transition=null,c.style.removeProperty("transition"),c.style.pointerEvents="none",c.style.userSelect="none",i.getOptions().dragClass?setTimeout(function(){L(c.firstElementChild,i.getOptions().dragClass);var e=window.getComputedStyle(c.firstElementChild).cursor;Ee=ie(e)}):Ee=ie(a),L(c,i.getOptions().orientation||"vertical"),L(c,p),fe={ghost:c,centerDelta:{x:m-l,y:r-s},positionDelta:{left:f-l,top:d-s},topLeft:{x:f,y:d}},ge.position={x:e.clientX+fe.centerDelta.x,y:e.clientY+fe.centerDelta.y},ge.mousePosition={x:e.clientX,y:e.clientY},ue=me.filter(function(e){return e.isDragRelevant(n,ge.payload)}),ge.relevantContainers=ue,be=Je(ue),we&&we({reset:!0,draggableInfo:void 0}),we=Ke(n,ue),ue.forEach(function(e){return e.prepareDrag(e,ue)}),Qe(!0),be(ge),Oe().appendChild(fe.ghost),Ce.start())}var et,tt,nt,ot=Ye=Be=null;function rt(e,t,n){var e=0<arguments.length&&void 0!==e?e:0,t=1<arguments.length&&void 0!==t?t:1,o=2<arguments.length&&void 0!==n&&n;console.log("translateGhost");var r=fe.ghost,n=fe.topLeft,i=n.x,a=n.y,l=!ge.container||ge.container.shouldUseTransformForGhost(),s=l?"translate3d(".concat(i,"px,").concat(a,"px, 0)"):null;if(1!==t&&(s=(s?"".concat(s," scale("):"scale(").concat(t,")")),0<e)return fe.ghost.style.transitionDuration=e+"ms",void requestAnimationFrame(function(){s&&(r.style.transform=s),l||(r.style.left=i+"px",r.style.top=a+"px"),ot=null,o&&(r.style.opacity="0")});null===ot&&(ot=requestAnimationFrame(function(){s&&(r.style.transform=s),l||(r.style.left=i+"px",r.style.top=a+"px"),ot=null,o&&(r.style.opacity="0")}))}function it(){var t;console.log("cancelDrag"),!pe||he||ve||(ye=!(he=!0),t=Object.assign({},ge,{targetElement:null,position:{x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER},mousePosition:{x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER}}),ue.forEach(function(e){e.handleDrag(t)}),ge.targetElement=null,ge.cancelDrop=!0,qe(),he=!1)}"undefined"!=typeof window&&"undefined"!=typeof window&&(et=window.document.head||window.document.getElementsByTagName("head")[0],(tt=window.document.createElement("style")).id="smooth-dnd-style-definitions",nt=re(oe),tt.type="text/css",tt.styleSheet?tt.styleSheet.cssText=nt:tt.appendChild(window.document.createTextNode(nt)),et.appendChild(tt));var at=(Se(),{register:function(e){e=e,console.log("registerContainer"),me.push(e),pe&&ge&&e.isDragRelevant(ge.container,ge.payload)&&(ue.push(e),e.prepareDrag(e,ue),we&&we({reset:!0,draggableInfo:void 0}),we=Ke(e,ue),be=Je(ue),e.handleDrag(ge))},unregister:function(e){var t;t=e,console.log("unregisterContainer"),me.splice(me.indexOf(t),1),pe&&ge&&(ge.container===t&&t.fireRemoveElement(),ge.targetElement===t.element&&(ge.targetElement=null),-1<(e=ue.indexOf(t))&&(ue.splice(e,1),we&&we({reset:!0,draggableInfo:void 0}),we=Ke(t,ue),be=Je(ue)))},isDragging:function(){return pe},cancelDrag:it});function lt(e,t,n){n=2<arguments.length&&void 0!==n?n:x.animationDuration;t?(L(e,o),e.style.transitionDuration=n+"ms"):(j(e,o),e.style.removeProperty("transition-duration"))}function st(n){var o=[];return Array.prototype.forEach.call(n.children,function(e){var t;e.nodeType===Node.ELEMENT_NODE?(M(t=e,v)||(t=function(e){if(Pt.wrapChild){var t=window.document.createElement("div");return t.className="".concat(v),e.parentElement.insertBefore(t,e),t.appendChild(e),t}return e}(e)),t[c]=0,o.push(t)):n.removeChild(e)}),o}function ct(e){function s(e,t,n,o){var r=4<arguments.length&&void 0!==arguments[4]&&arguments[4];if(o<n)return n;if(n!==o)return i=Math.floor((o+n)/2),l=c.getBeginEnd(e[i]),a=l.begin,l=l.end,t<a?s(e,t,n,i-1,r):l<t?s(e,t,i+1,o,r):!r||t<(l+a)/2?i:i+1;var i=c.getBeginEnd(e[n]),a=i.begin,l=i.end;return!r||t<(l+a)/2?n:n+1}var c=e.layout;return function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return s(e,t,0,e.length-1,n)}}function ut(e){var t,n,o,r=e.element,i=e.draggables,a=e.layout,l=e.getOptions,s=(t=(e={element:r,draggables:i,layout:a,getOptions:l}).element,n=e.draggables,o=e.layout,function(){n.forEach(function(e){lt(e,!1),o.setTranslation(e,0),o.setVisibility(e,!0)}),t[f]&&(t[f].parentNode.removeChild(t[f]),t[f]=null)}),c=(Pt.dropHandler||G)({element:r,draggables:i,layout:a,getOptions:l});return function(e,t){var n=t.addedIndex,o=t.removedIndex,t=2<arguments.length&&void 0!==arguments[2]&&arguments[2];s(),e.cancelDrop||(e.targetElement||l().removeOnDropOut||t)&&(e={removedIndex:o,addedIndex:null!==n?null!==o&&o<n?n-1:n:null,payload:e.payload},c(e,l().onDrop))}}function dt(e){var n=e.element,o=e.getOptions,r=null;return function(e){var t=e.draggableInfo,e=r;return null==r&&t.container.element===n&&"copy"!==o().behaviour&&(e=r=t.elementIndex),{removedIndex:e}}}function ft(e){var t=e.draggables,n=e.layout;return function(e){e=e.dragResult;null!==e.removedIndex&&n.setVisibility(t[e.removedIndex],!1)}}function gt(e){var n=e.element,o=e.layout;return function(e){var t=e.draggableInfo,e=document.elementFromPoint(t.position.x,t.position.y);if(e){e=z(e,t.relevantContainers);if(e&&e.element===n)return{pos:o.getPosition(t.position)}}return{pos:null}}}function mt(e){var n=e.layout,o=null;return function(e){var t=e.draggableInfo;return null===e.dragResult.pos?o=null:{elementSize:o=o||n.getSize(t.size)}}}function pt(e){var n=e.element;return function(e){var t=e.draggableInfo,e=e.dragResult;!function(e,t,n){t&&(!(2<arguments.length&&void 0!==n)||n)?e.targetElement=t:e.targetElement===t&&(e.targetElement=null)}(t,n,!!e.pos)}}function ht(){return function(e){return null!==e.dragResult.pos?{addedIndex:0}:{addedIndex:null}}}function vt(e){var n=e.layout,o=null;return function(e){var t=e.dragResult.addedIndex;if(t===o)return null;o=t;e=n.getBeginEndOfContainer(),t=e.begin,e.end;return{shadowBeginEnd:{rect:n.getTopLeftOfElementBegin(t)}}}}function yt(e){var c=e.layout,u=e.element,d=e.getOptions,f=null;return function(e){var t=e.dragResult,n=t.elementSize,o=t.shadowBeginEnd,r=t.addedIndex,i=t.dropPlaceholderContainer,a=d();if(a.dropPlaceholder){var l="boolean"==typeof a.dropPlaceholder?{}:a.dropPlaceholder,s=l.animationDuration,e=l.className,t=l.showOnTop;return null===r?(i&&null!==f&&u.removeChild(i),f=null,{dropPlaceholderContainer:void 0}):(i||(a=document.createElement("div"),(l=document.createElement("div")).className=w,a.className="".concat(h," ").concat(e||m),(i=document.createElement("div")).className="".concat(b),i.style.position="absolute",void 0!==s&&(i.style.transition="all ".concat(s,"ms ease")),i.appendChild(l),l.appendChild(a),c.setSize(i.style,n+"px"),i.style.pointerEvents="none",t?u.appendChild(i):u.insertBefore(i,u.firstElementChild)),f!==r&&o.dropArea&&c.setBegin(i.style,o.dropArea.begin-c.getBeginEndOfContainer().begin+"px"),f=r,{dropPlaceholderContainer:i})}return null}}function bt(e){var n=Dt(e);return function(e){var t=e.draggableInfo,e=e.dragResult;return t.invalidateShadow?n({draggableInfo:t,dragResult:e}):null}}function wt(e){var n,o,r=(n=(e=e).draggables,o=ct({layout:e.layout}),function(e){var t=e.dragResult,e=t.shadowBeginEnd,t=t.pos;if(e)return e.begin+e.beginAdjustment<=t&&e.end>=t?null:t<e.begin+e.beginAdjustment?o(n,t):t>e.end?o(n,t)+1:n.length;t=o(n,t,!0);return null!==t?t:n.length});return function(e){var t=e.dragResult,e=null;return null!==t.pos&&null===(e=r({dragResult:t}))&&(e=t.addedIndex),{addedIndex:e}}}function xt(){var n=null;return function(e){var t=e.dragResult,e=t.addedIndex,t=t.shadowBeginEnd;e!==n&&null!==n&&t&&(t.beginAdjustment=0),n=e}}function Et(e){var r=e.element,i=e.draggables,a=e.layout,l=e.getOptions,s=null;return function(e){var t=e.dragResult,n=t.addedIndex,e=t.removedIndex,t=t.elementSize;if(null===e)if(null!==n){if(!s){e=a.getBeginEndOfContainer();e.end=e.begin+a.getSize(r);n=a.getScrollSize(r)>a.getSize(r)?e.begin+a.getScrollSize(r)-a.getScrollValue(r):e.end,e=0<i.length?a.getBeginEnd(i[i.length-1]).end-i[i.length-1][c]:e.begin;if(n<e+t){(s=window.document.createElement("div")).className=d+" "+l().orientation;var o=0<i.length?t+e-n:t;return a.setSize(s.style,"".concat(o,"px")),r.appendChild(s),r[f]=s,{containerBoxChanged:!0}}}}else if(s){a.setTranslation(s,0);o=s;return s=null,r.removeChild(o),{containerBoxChanged:!(r[f]=null)}}}}function Ct(e){var l=e.draggables,s=e.layout,c=null,u=null;return function(e){var e=e.dragResult,t=e.addedIndex,n=e.removedIndex,o=e.elementSize;if(t!==c||n!==u){for(var r,i,a=0;a<l.length;a++)a!==n&&(r=l[a],i=0,null!==n&&n<a&&(i-=o),null!==t&&t<=a&&(i+=o),s.setTranslation(r,i));return{addedIndex:c=t,removedIndex:u=n}}}}function Dt(e){var f=e.draggables,g=e.layout,m=null;return function(e){var t=e.draggableInfo,n=e.dragResult,o=n.addedIndex,r=n.removedIndex,i=n.elementSize,a=n.pos,l=n.shadowBeginEnd;if(null===a)return{shadowBeginEnd:m=null};if(null===o||!t.invalidateShadow&&o===m)return null;var s=o-1,c=Number.MIN_SAFE_INTEGER,e=0,n=0,a=null,t=null;s===r&&s--,e=-1<s?(u=g.getSize(f[s]),t=g.getBeginEnd(f[s]),c=i<u?(d=(u-i)/2,t.end-d):t.end,t.end):(t={end:g.getBeginEndOfContainer().begin},g.getBeginEndOfContainer().begin);var u=Number.MAX_SAFE_INTEGER,d=o;d===r&&d++,n=d<f.length?(r=g.getSize(f[d]),a=g.getBeginEnd(f[d]),u=i<r?(i=(r-i)/2,a.begin+i):a.begin,a.begin):(a={begin:g.getContainerRectangles().rect.end},g.getContainerRectangles().rect.end-g.getContainerRectangles().rect.begin);t=t&&a?g.getTopLeftOfElementBegin(t.end):null;return m=o,{shadowBeginEnd:{dropArea:{begin:e,end:n},begin:c,end:u,rect:t,beginAdjustment:l?l.beginAdjustment:0}}}}function St(){var o=null;return function(e){var t=e.dragResult,n=t.pos,e=t.addedIndex,t=t.shadowBeginEnd;null!==n?null!=e&&null===o&&(n<t.begin&&(n=n-t.begin-5,t.beginAdjustment=n),o=e):o=null}}function Ot(e){var e=e.getOptions,t=!1,n=e();return function(e){e=!!e.dragResult.pos;e!==t&&((t=e)?n.onDragEnter&&n.onDragEnter():n.onDragLeave&&n.onDragLeave())}}function Rt(e){var e=e.getOptions,i=null,a=e();return function(e){var t=e.dragResult,n=t.addedIndex,o=t.removedIndex,r=e.draggableInfo,t=r.payload,e=r.element;a.onDropReady&&null!==n&&i!==n&&(r=i=n,null!==o&&o<n&&r--,a.onDropReady({addedIndex:r,removedIndex:o,payload:t,element:e?e.firstElementChild:void 0}))}}function At(e){return"drop-zone"===e.getOptions().behaviour?It(e)(dt,ft,gt,mt,pt,ht,vt,Ot,Rt):It(e)(dt,ft,gt,mt,pt,bt,wt,xt,Et,Ct,Dt,yt,St,Ot,Rt)}function It(i){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t.map(function(e){return e(i)}),r=null;return function(n){return r=o.reduce(function(e,t){return Object.assign(e,t({draggableInfo:n,dragResult:e}))},r||{addedIndex:null,removedIndex:null,elementSize:null,pos:null,shadowBeginEnd:null})}}}function Bt(h){return function(e){var t,n,o,r,i,a=Object.assign({},x,e),l=null,s=null,c=(n=p,o=st(t=h),e=n(),L(t,"".concat(y," ").concat(e.orientation)),{element:t,draggables:o,getOptions:n,layout:U(t,e.orientation,e.animationDuration)}),u=At(c),d=ut(c),f=R(h,function(){c.layout.invalidateRects(),g()});function g(){null!==s&&(s.invalidateShadow=!0,l=u(s),s.invalidateShadow=!1)}function m(e,t){for(var n=st(t),o=0;o<n.length;o++)e[o]=n[o];for(var r=0;r<e.length-n.length;r++)e.pop()}function p(){return a}return{element:h,draggables:c.draggables,isDragRelevant:(r=(e=c).element,i=e.getOptions,function(e,t){var n=i();if(n.shouldAcceptDrop)return n.shouldAcceptDrop(e.getOptions(),t);t=e.getOptions();return"copy"!==n.behaviour&&(N(r,"."+v)!==e.element&&(e.element===r||!(!t.groupName||t.groupName!==n.groupName)))}),layout:c.layout,dispose:function(e){var t;f.dispose(),t=e.element,Pt.wrapChild&&Array.prototype.forEach.call(t.children,function(e){e.nodeType===Node.ELEMENT_NODE&&M(e,v)&&(t.insertBefore(e.firstElementChild,e),t.removeChild(e))})},prepareDrag:function(e,t){var n=e.element,o=c.draggables;m(o,n),e.layout.invalidateRects(),o.forEach(function(e){return lt(e,!0,a.animationDuration)}),f.start()},handleDrag:function(e){return l=u(s=e)},handleDrop:function(e){f.stop(),l&&l.dropPlaceholderContainer&&h.removeChild(l.dropPlaceholderContainer),s=null,u=At(c),d(e,l),l=null},fireRemoveElement:function(){d(s,Object.assign({},l,{addedIndex:null}),!0),l=null},getDragResult:function(){return l},getTranslateCalculator:function(e){return Ct(c)(e)},onTranslated:function(){g()},setDraggables:function(){m(c.draggables,h)},getScrollMaxSpeed:function(){return Pt.maxScrollSpeed},shouldUseTransformForGhost:function(){return!0===Pt.useTransformForGhost},getOptions:p,setOptions:function(e){a=!1===(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])?Object.assign({},x,e):Object.assign({},x,a,e)}}}}var Pt=function(e,t){var n=Bt(e)(t);return e[r]=n,at.register(n),{dispose:function(){at.unregister(n),n.dispose(n)},setOptions:function(e,t){n.setOptions(e,t)}}};function Tt(e,t,n){Object.defineProperty(e,n,{set:function(e){t[n]=e},get:function(){return t[n]}})}Pt.wrapChild=!0,Pt.cancelDrag=function(){at.cancelDrag()},Pt.isDragging=function(){return at.isDragging()};var zt=function(e,t){return console.warn('default export is deprecated. please use named export "smoothDnD"'),Pt(e,t)};zt.cancelDrag=function(){Pt.cancelDrag()},zt.isDragging=function(){return Pt.isDragging()},Tt(zt,Pt,"useTransformForGhost"),Tt(zt,Pt,"maxScrollSpeed"),Tt(zt,Pt,"wrapChild"),Tt(zt,Pt,"dropHandler"),e.smoothDnD=Pt,e.constants=t,e.dropHandlers=Y,e.default=zt,Object.defineProperty(e,"__esModule",{value:!0})});
